<freemarkerTextToGlueTransformer>
	<freemarkerTemplate><![CDATA[
<#list rows as row>
  <#assign drug_id>${row["Drug"]?trim}</#assign>
  <#assign publication_id>${row["Publication"]?trim}</#assign>
  <#assign gene>${row["Gene"]?trim}</#assign>
  <#assign substitutions>${row["Substitutions"]?trim}</#assign>
  <#assign replicon_clade>${row["Clade"]?trim}</#assign>
  <#assign id>${drug_id}_${publication_id}_${gene}_${substitutions}_${replicon_clade}</#assign>
  create custom-table-row --noCommit drug_resistance_finding ${id}
</#list>
commit

<#list rows as row>
  <#assign drug_id>${row["Drug"]?trim}</#assign>
  <#assign publication_id>${row["Publication"]?trim}</#assign>
  <#assign gene>${row["Gene"]?trim}</#assign>
  <#assign substitutions>${row["Substitutions"]?trim}</#assign>
  <#assign replicon_clade>${row["Clade"]?trim}</#assign>
  <#assign min_fold_change>${row["MinFoldChange"]?trim}</#assign>
  <#assign max_fold_change>${row["MaxFoldChange"]?trim}</#assign>
  <#assign id>${drug_id}_${publication_id}_${gene}_${substitutions}_${replicon_clade}</#assign>
  custom-table-row drug_resistance_finding ${id}
    set link-target --noCommit drug custom-table-row/drug/${drug_id}
    set link-target --noCommit drug_resistance_publication custom-table-row/drug_resistance_publication/${publication_id}
    set link-target --noCommit replicon_clade alignment/AL_${replicon_clade}
    set link-target --noCommit variation reference/REF_MASTER_NC_004102/feature-location/${gene}/variation/RAS_${gene}_${substitutions}
<#if min_fold_change != "">
    set field --noCommit min_fold_change ${min_fold_change}
</#if>
<#if max_fold_change != "">
    set field --noCommit max_fold_change ${max_fold_change}
</#if>
    exit
</#list>
commit
]]></freemarkerTemplate>
</freemarkerTextToGlueTransformer>