<freemarkerTextToGlueTransformer>
	<freemarkerTemplate><![CDATA[
reference REF_MASTER_NC_004102
<#list rows as row>
  <#assign gene>${row["Gene"]?trim}</#assign>
  <#assign substitutions>${row["Substitutions"]?trim}</#assign>
  <#assign firstCodonMatch = substitutions?matches("(\\d+)[A-Z].*")>
  <#assign firstCodon = firstCodonMatch?groups[1]>
  <#assign variationName>RAS_${gene}_${substitutions}</#assign>
  
  feature-location ${gene}
    create variation ${variationName} -t AMINO_ACID "Resistance associated substitution"
    variation ${variationName}
      set field displayName "${gene}:${substitutions}"
      set field is_resistance_associated_variant true 
      set field rav_substitutions "${substitutions}" 
      set field rav_first_codon "${firstCodon}" 
<#list substitutions?split("+") as substitutionUntrimmed>
  <#assign matchResult = substitutionUntrimmed?trim?matches('([1-9][0-9]*)([ACDEFGHIKLMNPQRSTVWY*])')>
  <#assign codon>${matchResult?groups[1]}</#assign>
  <#assign substitutedAA>${matchResult?groups[2]}</#assign>
      create pattern-location --noCommit ${substitutedAA} --labeledCodon ${codon} ${codon}
</#list>
      exit  
    exit
</#list>
  exit
]]></freemarkerTemplate>
</freemarkerTextToGlueTransformer>